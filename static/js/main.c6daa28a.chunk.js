(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{23:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var r,o,a,c,i,s,u,l,d,b,m,f,j,p=t(10),h=t.n(p),x=t(2),g=t(4),O=t(1),v=t(3),y=t(11),w=t.n(y),k="#F93154",S="#FFA900",N="#FBFBFB",P="#262626",A=t(0),I=function(e){var n=e.gameOver,t=e.gamePaused,r=e.className,o=void 0===r?"":r,a=e.handleStartGame,c=e.handlePauseGame;return Object(A.jsxs)("div",{className:w()("mx-auto",o),style:{minWidth:"15rem",maxWidth:"20rem"},children:[Object(A.jsx)(T,{className:"btn btn-block mb-2 ".concat(n?"btn-primary":"btn-secondary"),disabled:t,onClick:a,children:"Start Again"}),Object(A.jsx)(z,{active:t,disabled:n,className:"btn btn-block",onClick:c,children:t?"Resume Game":"Pause Game"})]})},T=v.a.button(r||(r=Object(x.a)(["\n  padding: 0.5rem 1rem;\n  text-transform: uppercase;\n  font-weight: 800;\n  font-size: 1.25rem;\n  border-radius: 1rem;\n"]))),z=Object(v.a)(T)(o||(o=Object(x.a)(["\n  border: 2px solid ",";\n  color: ",";\n  background-color: ",";\n"])),S,(function(e){return e.active?P:S}),(function(e){return e.active?S:"transparent"})),L=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},E=function(e,n,t){for(var r=e.position||{},o=r.x,a=r.y,c=t||{},i=c.x,s=c.y,u=0;u<e.tetromino.length;u++)for(var l=0;l<e.tetromino[u].length;l++)if(0!==e.tetromino[u][l]&&(!n[u+a+s]||!n[u+a+s][l+o+i]||"clear"!==n[u+a+s][l+o+i][1]))return!0;return!1},G={0:{shape:[[0]],color:"0,0,0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80,227,230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36,95,223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223,173,36"},O:{shape:[["O","O"],["O","O"]],color:"223,217,36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48,211,56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132,51,198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227,78,78"}},R=function(){var e=Math.floor(Math.random()*(Object.keys(G).length-1));switch(e){case 0:return G.I;case 1:return G.J;case 2:return G.L;case 3:return G.O;case 4:return G.S;case 5:return G.T;case 6:return G.Z;default:return console.error("Invalid Random Tetromino",e),G[0]}},J=function(e){var n=e.type;return Object(A.jsx)(F,{color:G[n].color})},C=Object(O.memo)(J),F=v.a.div(a||(a=Object(x.a)(["\n  aspect-ratio: 1;\n  background: rgba(",", 0.8);\n  border: 0.5rem solid;\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"])),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),Z=t(15),B=t.n(Z),D=function(e){var n=e.highscore,t=e.gameOver,r=e.topScore,o=e.startNewGame;return Object(A.jsxs)(M,{active:r||t,children:[r&&Object(A.jsx)(B.a,{}),Object(A.jsxs)(U,{active:r||t,children:[Object(A.jsx)("h1",{children:r?"Congratulations!":"Game Over!"}),Object(A.jsx)("h2",{children:r?"on your new highscore":"Bad luck, the score to beat is"}),Object(A.jsx)(H,{children:n.toLocaleString("en")}),Object(A.jsx)(q,{className:"btn btn-dark btn-lg",onClick:o,children:Object(A.jsx)("strong",{children:r?"Thanks":"Try Again"})})]})]})},M=v.a.div(c||(c=Object(x.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  z-index: ",";\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.75);\n"])),(function(e){return e.active?1:-1})),U=v.a.div(i||(i=Object(x.a)(["\n  padding: 1rem 2rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 5;\n  border-radius: 1rem;\n  transition: all 1500ms cubic-bezier(0.34, 1.56, 0.64, 1);\n  color: ",";\n  background-color: ",";\n  text-shadow: 2px 2px 2px ",";\n  transform: ",";\n  h1 {\n    font-size: 2rem;\n  }\n  h2 {\n    font-size: 1.5rem;\n  }\n  @media screen and (min-width: 992px) {\n    padding: 3rem 4rem;\n    h1 {\n      font-size: 3rem;\n    }\n    h2 {\n      font-size: 2rem;\n    }\n  }\n"])),(function(e){return e.active?N:P}),(function(e){return e.active?"".concat(P,"dd"):"".concat(N,"dd")}),(function(e){return e.active?"black":N}),(function(e){return e.active?"scale(1.5)":"scale(0)"})),q=v.a.button(s||(s=Object(x.a)(["\n  border: 2px solid ",";\n  &:hover {\n    border: 2px solid ",";\n    filter: invert(1);\n  }\n"])),N,N),H=v.a.h1(u||(u=Object(x.a)(["\n  font-size: 3em;\n  margin-bottom: 1rem;\n  text-shadow: 2px 2px 2px ",", -1px -1px 5px ",";\n  @media screen and (min-width: 992px) {\n    font-size: 5em;\n  }\n"])),k,k),K=t.p+"static/media/keyboard.4dfe8221.png",W=["Rotate tetromino","Move left one square","Move right one square","Move tetromino down","Drop tetromino","Pause / resume"],Q=function(){return Object(A.jsx)(V,{className:"d-none d-lg-block rounded mx-auto mb-4",children:Object(A.jsx)(X,{children:W.map((function(e,n){return Object(A.jsxs)(Y,{children:[Object(A.jsx)($,{className:"d-inline-block mr-3",idx:n,img:K}),Object(A.jsx)("strong",{children:e})]},n)}))})})},V=v.a.div(l||(l=Object(x.a)(["\n  padding: 1rem;\n  background-color: rgba(255, 255, 255, 0.8);\n  max-width: 20rem;\n"]))),X=v.a.ul(d||(d=Object(x.a)(["\n  list-style: none;\n  margin: 0;\n  padding: 0;\n"]))),Y=v.a.li(b||(b=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 0.75rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 3px solid rgba(0, 0, 0, 0.75);\n  &:last-of-type {\n    margin-bottom: 0;\n    padding-bottom: 0;\n    border-bottom: 0;\n  }\n"]))),$=v.a.span(m||(m=Object(x.a)(["\n  display: block;\n  width: 100px;\n  height: 40px;\n  background-image: url(",");\n  background-size: 100% 600%;\n  background-repeat: no-repeat;\n  background-position: 0 calc(-40px * ",");\n  max-height: 100%;\n"])),(function(e){return e.img}),(function(e){return e.idx})),_=function(e){var n=e.stage,t=void 0===n?[]:n,r=e.gamePaused,o=t.length?t[0].length:0;return Object(A.jsxs)(ee,{width:o,children:[t.map((function(e,n){return e.map((function(e,t){return Object(A.jsx)(C,{type:e[0]},"".concat(n,"-").concat(t))}))})),r&&Object(A.jsx)(ne,{})]})},ee=v.a.div(f||(f=Object(x.a)(["\n  position: relative;\n  display: grid;\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  background: #333;\n  border: 6px solid grey;\n  width: 100%;\n"])),(function(e){return e.width})),ne=v.a.div(j||(j=Object(x.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: ",";\n"])),P),te=Array.from(Array(4),(function(){return new Array(4).fill([0,"clear"])})),re=function(e){var n=e.nextTetromino,t=e.gamePaused;return Object(A.jsxs)(ee,{width:4,children:[te.map((function(e,t){return e.map((function(e,r){return void 0!==n[t]&&n[t][r]?Object(A.jsx)(C,{type:n[t][r]},"".concat(t,"-").concat(r)):Object(A.jsx)(C,{type:0},"".concat(t,"-").concat(r))}))})),t&&Object(A.jsx)(ne,{})]})},oe=[40,100,300,1200];var ae,ce,ie,se,ue=t(9),le=function(e,n){var t=Object(O.useState)(L()),r=Object(g.a)(t,2),o=r[0],a=r[1],c=Object(O.useState)(0),i=Object(g.a)(c,2),s=i[0],u=i[1];return Object(O.useEffect)((function(){u(0);var t=function(t){var r=t.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.tetromino.forEach((function(n,t){n.forEach((function(n,o){0!==n&&(r[t+e.position.y][o+e.position.x]=[n,e.collided?"merged":"clear"])}))})),e.collided?(n(),function(e){return e.reduce((function(n,t){return-1===t.findIndex((function(e){return 0===e[0]}))?(u((function(e){return e+1})),n.unshift(new Array(e[0].length).fill([0,"clear"])),n):(n.push(t),n)}),[])}(r)):r};a((function(e){return t(e)}))}),[e,n]),{stage:o,setStage:a,rowsCleared:s}};var de=function(){var e=Object(O.useState)(!1),n=Object(g.a)(e,2),t=n[0],r=n[1],o=Object(O.useState)(!1),a=Object(g.a)(o,2),c=a[0],i=a[1],s=Object(O.useState)(0),u=Object(g.a)(s,2),l=u[0],d=u[1],b=Object(O.useState)(0),m=Object(g.a)(b,2),f=m[0],j=m[1],p=Object(O.useState)(0),h=Object(g.a)(p,2),x=h[0],v=h[1],y=Object(O.useState)(!1),w=Object(g.a)(y,2),k=w[0],S=w[1],N=function(){var e=Object(O.useState)(R().shape),n=Object(g.a)(e,2),t=n[0],r=n[1],o=Object(O.useState)({position:{x:0,y:0},tetromino:G[0].shape,collided:!1}),a=Object(g.a)(o,2),c=a[0],i=a[1],s=function(e){return e.map((function(n,t){return e.map((function(e){return e[t]}))})).map((function(e){return e.reverse()}))},u=Object(O.useCallback)((function(){return i({position:{x:4,y:0},tetromino:t,collided:!1}),r(R().shape)}),[t]);return{player:c,nextTetromino:t,updatePlayerPosition:function(e,n){return i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{position:{x:t.position.x+e.x,y:t.position.y+e.y},collided:n})}))},resetPlayer:u,playerRotate:function(e){var n=JSON.parse(JSON.stringify(c));n.tetromino=s(n.tetromino);for(var t=n.position.x,r=1;E(n,e,{x:0,y:0});)if(n.position.x+=r,(r=-(r+(r>0?1:-1)))>n.tetromino[0].length)return s(n.tetromino),void(n.position.x=t);i(n)}}}(),P=N.player,T=N.nextTetromino,z=N.updatePlayerPosition,J=N.resetPlayer,C=N.playerRotate,F=le(P,J),Z=F.stage,B=F.setStage,M=function(e){var n=Object(O.useState)(0),t=Object(g.a)(n,2),r=t[0],o=t[1],a=Object(O.useState)(0),c=Object(g.a)(a,2),i=c[0],s=c[1],u=Object(O.useState)(0),l=Object(g.a)(u,2),d=l[0],b=l[1],m=Object(O.useCallback)((function(){e>0&&(o((function(n){return n+oe[e-1]*(d+1)})),s((function(n){return n+e})))}),[d,e]);return Object(O.useEffect)((function(){m()}),[m,e,r]),{score:r,setScore:o,rows:i,setRows:s,level:d,setLevel:b}}(F.rowsCleared),U=M.level,q=M.rows,H=M.score,K=M.setLevel,W=M.setRows,V=M.setScore;Object(O.useEffect)((function(){var e=localStorage.getItem("highscore")||"0";v(parseInt(e,10)),Y()}),[]),function(e,n){var t=Object(O.useRef)(e);Object(O.useEffect)((function(){t.current=e}),[e]),Object(O.useEffect)((function(){if(n){var e=setInterval((function(){return t.current()}),n);return function(){clearInterval(e)}}}),[n])}((function(){if(q>10*(U+1)&&(K((function(e){return e+1})),d(1e3/(U+1)+200)),Z[0].filter((function(e){return"merged"===e[1]})).length>0)return r(!0),d(0),void(H>0&&H>x&&(localStorage.setItem("highscore","".concat(H)),v(H),S(!0)));ee()}),l);var X=function(e){E(P,Z,{x:e,y:0})||z({x:e,y:0},!1)},Y=function(){B(L()),J(),r(!1),S(!1),d(1200),K(0),V(0),W(0)},$=function(){return c?(i((function(e){return!e})),d(f)):(i((function(e){return!e})),j(l),void d(0))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!E(P,Z,{x:0,y:e}))return z({x:0,y:e},!1);z({x:0,y:e-1},!0)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d(0),!e)return ee();for(var n=!1,t=0;!n;)t++,E(P,Z,{x:0,y:t})&&(n=!0);ee(t)};return Object(A.jsxs)("div",{className:"my-app p-4",role:"button",tabIndex:0,onKeyDown:function(e){if(e.preventDefault(),t)return"Escape"===e.key&&t?Y():void 0;if("Enter"===e.key)return $();if(!c)switch(e.key){case"ArrowLeft":X(-1);break;case"ArrowRight":X(1);break;case"ArrowDown":ne();break;case"ArrowUp":C(Z);break;case" ":ne(!0)}},onKeyUp:function(e){t||c||"ArrowDown"!==e.key&&" "!==e.key||d(1e3/(U+1)+200)},children:[Object(A.jsx)(D,{highscore:x,gameOver:t,topScore:k,startNewGame:function(){return Y()}}),Object(A.jsxs)("div",{className:"w-100",children:[Object(A.jsx)(be,{children:"SHAUN'S TETRIS APP"}),Object(A.jsxs)("div",{className:"tetris-app",children:[Object(A.jsx)(_,{stage:Z,gamePaused:c}),Object(A.jsxs)("aside",{className:"w-100 tetris-aside",children:[Object(A.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-around mb-3",children:[Object(A.jsx)(je,{className:"input-group",children:"Score:  ".concat(H)}),Object(A.jsx)(je,{className:"input-group",children:"Rows:   ".concat(q)}),Object(A.jsx)(je,{className:"input-group",children:"Level:   ".concat(U)})]}),Object(A.jsx)(I,{gameOver:t,gamePaused:c,handleStartGame:Y,handlePauseGame:$,className:"d-none d-lg-block mb-4"}),Object(A.jsx)(me,{children:Object(A.jsx)(re,{nextTetromino:T,gamePaused:c||t})}),Object(A.jsx)(Q,{}),Object(A.jsxs)(fe,{className:"w-100 d-none d-lg-flex flex-column text-center px-5",children:[Object(A.jsx)("h2",{className:"mb-2",children:"Highscore"}),Object(A.jsx)("h2",{className:"h1 font-weight-bold",children:x.toLocaleString("en")})]})]})]}),Object(A.jsx)("div",{className:"d-block d-lg-none",children:Object(A.jsx)(I,{gameOver:t,gamePaused:c,handleStartGame:Y,handlePauseGame:$})})]})]})},be=v.a.h1(ae||(ae=Object(x.a)(["\n  display: block;\n  color: white;\n  text-align: center;\n  padding: 2rem;\n  text-shadow: 2px 2px 2px ",";\n"])),k),me=v.a.div(ce||(ce=Object(x.a)(["\n  display: none;\n  @media screen and (min-width: 576px) {\n    display: block;\n    margin: 0 0 1.5rem;\n    width: 12rem;\n  }\n  @media screen and (min-width: 992px) {\n    margin: 0 auto 1.5rem;\n    width: 15rem;\n  }\n"]))),fe=v.a.div(ie||(ie=Object(x.a)(["\n  margin: 0 auto 1.5rem;\n  padding: 1rem;\n  background-color: rgba(255, 255, 255, 0.8);\n  max-width: 20rem;\n  border-radius: 0.25rem;\n"]))),je=v.a.div(se||(se=Object(x.a)(["\n  background-color: #111;\n  border-radius: 1rem;\n  max-width: 20rem;\n  margin: 0 0 0.5rem 0;\n  color: white;\n  border: 4px solid grey;\n  font-weight: 800;\n  font-size: 1rem;\n  padding: 0.75rem 1rem;\n  text-align: center;\n  @media screen and (min-width: 768px) {\n    font-size: 1.25rem;\n  }\n"])));t(23);h.a.render(Object(A.jsx)(de,{}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.c6daa28a.chunk.js.map