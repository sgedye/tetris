(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r,o,c,a,i,s,u=n(0),l=n.n(u),d=n(10),b=n.n(d),f=n(2),p=n(3),j=n(4),m=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},h=function(e,t,n){for(var r=e.position||{},o=r.x,c=r.y,a=n||{},i=a.x,s=a.y,u=0;u<e.tetromino.length;u++)for(var l=0;l<e.tetromino[u].length;l++)if(0!==e.tetromino[u][l]&&(!t[u+c+s]||!t[u+c+s][l+o+i]||"clear"!==t[u+c+s][l+o+i][1]))return!0;return!1},O={0:{shape:[[0]],color:"0,0,0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80,227,230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36,95,223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223,173,36"},O:{shape:[["O","O"],["O","O"]],color:"223,217,36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48,211,56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132,51,198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227,78,78"}},g=function(){var e=Math.floor(Math.random()*(Object.keys(O).length-1));switch(e){case 0:return O.I;case 1:return O.J;case 2:return O.L;case 3:return O.O;case 4:return O.S;case 5:return O.T;case 6:return O.Z;default:return console.error("Invalid Random Tetromino",e),O[0]}},x=n(1),v=function(e){var t=e.type;return Object(x.jsx)(w,{color:O[t].color})},y=Object(u.memo)(v),w=j.a.div(r||(r=Object(p.a)(["\n  background: rgba(",", 0.8);\n  border: 0.5rem solid;\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"])),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),S=function(e){e.gameOver;var t=e.text,n=void 0===t?"":t;return Object(x.jsxs)("div",{className:"col-6 col-md-12",children:[Object(x.jsxs)(k,{className:"input-group",children:[Object(x.jsx)("div",{className:"input-group-prepend",children:Object(x.jsx)(N,{className:"input-group-text",id:"basic-addon3",children:n})}),Object(x.jsx)(I,{type:"text",className:"form-control",id:n,"aria-describedby":"basic-addon3"})]}),Object(x.jsx)("label",{htmlFor:n,className:"sr-only",children:n})]})},k=j.a.div(o||(o=Object(p.a)(["\n  background-color: #111;\n  border-radius: 1rem;\n  // width: 100%;\n  max-width: 200px;\n  padding: 0;\n  margin-bottom: 0.5rem;\n"]))),N=j.a.span(c||(c=Object(p.a)(["\n  color: white;\n  font-weight: 800;\n  font-size: 1rem;\n  padding: 0.75rem;\n  text-align: center;\n  background-color: transparent;\n  border: 4px solid grey;\n  border-right: none;\n  border-radius: 1rem 0 0 1rem;\n  @media screen and (min-width: 768px) {\n    font-size: 1.25rem;\n  }\n"]))),I=j.a.input(a||(a=Object(p.a)(["\n  color: white;\n  font-weight: 800;\n  font-size: 1rem;\n  padding: 0.75rem;\n  text-align: center;\n  background-color: transparent;\n  border: 4px solid grey;\n  border-right: none;\n  border-radius: 1rem 0 0 1rem;\n  padding-left: 0;\n  border: 4px solid grey;\n  border-left: none;\n  border-radius: 0 1rem 1rem 0;\n  @media screen and (min-width: 768px) {\n    font-size: 1.25rem;\n  }\n"]))),A=function(e){var t=e.stage,n=void 0===t?[]:t,r=n.length?n[0].length:0,o=n.length;return Object(x.jsx)("div",{className:"game-area",children:Object(x.jsx)(E,{width:r,height:o,children:n.map((function(e,t){return e.map((function(e,n){return Object(x.jsx)(y,{type:e[0]},"".concat(t,"-").concat(n))}))}))})})},E=j.a.div(i||(i=Object(p.a)(["\n  display: grid;\n  /* grid-template-rows: repeat(\n    ",",\n    calc(2vw / ",")\n  ); */\n  grid-template-rows: repeat(20, 3vw);\n  grid-template-columns: repeat(",", auto);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  height: 100%;\n  max-width: 40vw;\n  background: #333;\n"])),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width})),J=j.a.button(s||(s=Object(p.a)(["\n  padding: 0.5rem 1rem;\n  color: white;\n  background-color: red;\n  text-transform: uppercase;\n  font-weight: 800;\n  font-size: 1.25rem;\n  border-radius: 1rem;\n"])));var L=n(8),R=function(e,t){var n=Object(u.useState)(m()),r=Object(f.a)(n,2),o=r[0],c=r[1],a=Object(u.useState)(0),i=Object(f.a)(a,2),s=i[0],l=i[1];return Object(u.useEffect)((function(){l(0);var n=function(n){var r=n.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.tetromino.forEach((function(t,n){t.forEach((function(t,o){0!==t&&(r[n+e.position.y][o+e.position.x]=[t,e.collided?"merged":"clear"])}))})),e.collided?(t(),function(e){return e.reduce((function(t,n){return-1===n.findIndex((function(e){return 0===e[0]}))?(l((function(e){return e+1})),t.unshift(new Array(e[0].length).fill([0,"clear"])),t):(t.push(n),t)}),[])}(r)):r};c((function(e){return n(e)}))}),[e,t]),{stage:o,setStage:c,rowsCleared:s}};var P=function(){var e=Object(u.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],o=Object(u.useState)(0),c=Object(f.a)(o,2),a=c[0],i=c[1],s=Object(u.useState)(0),l=Object(f.a)(s,2),d=l[0],b=l[1],p=function(){var e=Object(u.useState)({position:{x:0,y:0},tetromino:O[0].shape,collided:!1}),t=Object(f.a)(e,2),n=t[0],r=t[1],o=function(e){return e.map((function(t,n){return e.map((function(e){return e[n]}))})).map((function(e){return e.reverse()}))},c=Object(u.useCallback)((function(){return r({position:{x:4,y:0},tetromino:g().shape,collided:!1})}),[]);return{player:n,updatePlayerPosition:function(e,t){return r((function(n){return Object(L.a)(Object(L.a)({},n),{},{position:{x:n.position.x+e.x,y:n.position.y+e.y},collided:t})}))},resetPlayer:c,playerRotate:function(e){var t=JSON.parse(JSON.stringify(n));t.tetromino=o(t.tetromino);for(var c=t.position.x,a=1;h(t,e,{x:0,y:0});)if(t.position.x+=a,(a=-(a+(a>0?1:-1)))>t.tetromino[0].length)return o(t.tetromino),void(t.position.x=c);r(t)}}}(),j=p.player,v=p.updatePlayerPosition,y=p.resetPlayer,w=p.playerRotate,k=R(j,y),N=k.stage,I=k.setStage,E=function(e){var t=Object(u.useState)(0),n=Object(f.a)(t,2),r=n[0],o=n[1],c=Object(u.useState)(0),a=Object(f.a)(c,2),i=a[0],s=a[1],l=Object(u.useState)(0),d=Object(f.a)(l,2),b=d[0],p=d[1],j=Object(u.useCallback)((function(){var t=[40,100,300,1200];e>0&&(o((function(n){return n+t[e-1]*(b+1)})),s((function(t){return t+e})))}),[b,e]);return Object(u.useEffect)((function(){j()}),[j]),{score:r,setScore:o,rows:i,setRows:s,level:b,setLevel:p}}(k.rowsCleared/2),P=E.level,T=E.rows,C=E.score,Z=E.setLevel,z=E.setRows,D=E.setScore;!function(e,t){var n=Object(u.useRef)(e);Object(u.useEffect)((function(){n.current=e}),[e]),Object(u.useEffect)((function(){if(t){var e=setInterval((function(){return n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){G(),T>10*(P+1)&&(Z((function(e){return e+1})),i(1e3/(P+1)+200)),N[0].filter((function(e){return"merged"===e[1]})).length&&(console.log("\xa1GAME OVER! --- You scored: ".concat(C," points!")),r(!0),i(0))}),a);var M=function(e){h(j,N,{x:e,y:0})||v({x:e,y:0},!1)},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!h(j,N,{x:0,y:e}))return v({x:0,y:e},!1);v({x:0,y:e-1},!0)},K=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i(0),!e)return G();for(var t=!1,n=1;!t;)n++,h(j,N,{x:0,y:n})&&(t=!0);G(n)};return Object(x.jsxs)("div",{className:"my-app p-4",role:"button",tabIndex:0,onKeyDown:function(e){if(e.preventDefault(),!n)switch(e.key){case"ArrowLeft":M(-1);break;case"ArrowRight":M(1);break;case"ArrowDown":K();break;case"ArrowUp":w(N);break;case" ":K(!0)}},onKeyUp:function(e){n||"ArrowDown"!==e.key&&" "!==e.key||i(1e3/(P+1)+200)},children:[Object(x.jsx)("div",{className:"text-center py-4",children:Object(x.jsx)("h1",{className:"text-white",children:"TETRIS APP"})}),Object(x.jsxs)("div",{className:"tetris-app",children:[Object(x.jsx)(A,{stage:N}),Object(x.jsxs)("aside",{className:"row score-area",children:[n?Object(x.jsx)("p",{children:"gameover"}):null,Object(x.jsx)(S,{text:"Score:  ".concat(C)}),Object(x.jsx)(S,{text:"Rows:  ".concat(T)}),Object(x.jsx)(S,{text:"Level:  ".concat(P)}),Object(x.jsxs)("div",{className:"col-6 col-md-12",children:[Object(x.jsx)(J,{className:"btn btn-block",onClick:function(){I(m()),y(),r(!1),i(1e3/(P+1)+200),Z(0),D(0),z(0)},children:"Start Again"}),Object(x.jsx)("button",{className:"btn btn-block ".concat(n&&"d-none"),onClick:function(){return a?(b(a),i(0)):i(d)},children:"Pause Game"})]})]})]})]})};n(21);b.a.render(Object(x.jsx)(l.a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.6d585902.chunk.js.map